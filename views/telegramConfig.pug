extends ./partial/layout.pug

block linkcss
    link(rel="stylesheet", href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css")
    link(rel="stylesheet", href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css")
    link(rel="stylesheet", href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500&display=swap")
    link(rel="stylesheet", href="/css/configTelegram.css")
    link(rel="stylesheet", href="/css/pageCommon.css")

block content
    .container.py-2
        h2.text-center.text-primary
            i.fas.fa-user-shield.me-2
            | Telegram Push Notification Config
            small.d-block.text-muted.fs-6.fw-normal Select one chat and multiple ranges to configure notifications

        .card.card-custom.mx-auto
            .card-body
                .row.transfer-container.p-3.g-0
                    .col-md-6.p-2
                        .d-flex.justify-content-between.align-items-center.mb-2
                            h6.text-primary.fw-bold.mb-0 Add Telegram Chat
                            button.btn.btn-sm.btn-outline-primary(type="button", id="manageTelegramBtn")
                                i.fas.fa-cog.me-1
                                | Manage
                        .input-group.mb-2
                            span.input-group-text
                                i.fas.fa-search
                            input.form-control(type="text", placeholder="Search available telegram chats...", id="searchAvailablechats")
                        ul.site-list#availableChatList
                    .col-md-6.p-2
                        .d-flex.justify-content-between.align-items-center.mb-2
                            h6.text-primary.fw-bold.mb-0 Range Site Id
                            button.btn.btn-sm.btn-outline-primary(type="button", id="manageRangeBtn")
                                i.fas.fa-cog.me-1
                                | Manage
                        .input-group.mb-2
                            span.input-group-text
                                i.fas.fa-search
                            input.form-control(type="text", placeholder="Search assigned range sites...", id="searchAssignedRangeSites")
                        ul.site-list#assignedRangeList

                .d-grid.gap-2.d-md-flex.justify-content-md-center.mt-4
                    button.btn.btn-success.btn-lg#updateAccessBtn(type="button", disabled)
                        i.fas.fa-save.me-2
                        | Save Changes

    //- Modal quản lý Telegram
    .modal.fade#telegramModal(tabindex="-1")
        .modal-dialog
            .modal-content
                .modal-header
                    h5.modal-title
                        i.fas.fa-telegram.me-2
                        | Manage Telegram Chats
                    button.btn-close(type="button", data-bs-dismiss="modal")
                .modal-body
                    form#telegramForm
                        .mb-3
                            label.form-label Chat ID
                            input.form-control#telegramChatId(type="text", placeholder="Enter Telegram Chat ID", required)
                            .form-text Chat ID must be number. You can take it from @userinfobot
                        .mb-3
                            label.form-label Chat Name
                            input.form-control#telegramChatName(type="text", placeholder="Enter Chat Name", required)
                        input(type="hidden", id="telegramEditId")
                .modal-footer
                    button.btn.btn-secondary(type="button", data-bs-dismiss="modal") Cancel
                    button.btn.btn-danger#deleteTelegramBtn(type="button")
                        i.fas.fa-trash.me-1
                        | Delete
                    button.btn.btn-warning#editTelegramBtn(type="button")
                        i.fas.fa-edit.me-1
                        | Update
                    button.btn.btn-primary#addTelegramBtn(type="submit")
                        i.fas.fa-plus.me-1
                        | Add New

    //- Modal quản lý Range
    .modal.fade#rangeModal(tabindex="-1")
        .modal-dialog
            .modal-content
                .modal-header
                    h5.modal-title
                        i.fas.fa-code-branch.me-2
                        | Manage Range Sites
                    button.btn-close(type="button", data-bs-dismiss="modal")
                .modal-body
                    form#rangeForm
                        .mb-3
                            label.form-label Range Name
                            input.form-control#rangeName(type="text", placeholder="Enter Range Name", required)
                        .row
                            .col-6
                                .mb-3
                                    label.form-label Start Range
                                    input.form-control#rangeStart(type="number", placeholder="Start", min="0", required)
                            .col-6
                                .mb-3
                                    label.form-label End Range
                                    input.form-control#rangeEnd(type="number", placeholder="End", min="0", required)
                        input(type="hidden", id="rangeEditId")
                .modal-footer
                    button.btn.btn-secondary(type="button", data-bs-dismiss="modal") Cancel
                    button.btn.btn-danger#deleteRangeBtn(type="button")
                        i.fas.fa-trash.me-1
                        | Delete
                    button.btn.btn-warning#editRangeBtn(type="button")
                        i.fas.fa-edit.me-1
                        | Update
                    button.btn.btn-primary#addRangeBtn(type="submit")
                        i.fas.fa-plus.me-1
                        | Add New

block linkcriptbody
    script(src="https://code.jquery.com/jquery-3.7.1.min.js")
    script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js")
    script(src="https://cdn.datatables.net/2.0.8/js/dataTables.min.js")
    script(src="/js/util.js")
    script(src="/js/hostname.js")
    script(src="/js/configTelegram.js")